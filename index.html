<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Progress Tracker</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h2 class="udemy">Udemy Course Progress</h2>
        <h3>Web Developer Bootcamp - Colt Steele </h3>

        <div class="progress-bar-wrapper">
            <div class="progress-bar-fill" id="progressFill"></div>
            <div class="progress-text" id="progressText">0%</div>
        </div>


        <div class="form-wrapper">
            <form id="progressForm">
                <input type="number" id="minutesInput" placeholder="Enter minutes completed" min="1" required />
                <button class="btn add-btn" type="submit">Add Progress</button>
            </form>
            <button id="resetBtn" class="btn reset-btn" >Reset Progress</button>
        </div>

        <p id="remainingText"></p>
    </div>
    <script src="script.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBydkLqBW6p9Dyy47ScQ70SCcgsJSls15E",
          authDomain: "udemy-progress-tracker.firebaseapp.com",
          projectId: "udemy-progress-tracker",
          storageBucket: "udemy-progress-tracker.firebasestorage.app",
          messagingSenderId: "3945093779",
          appId: "1:3945093779:web:bc23ee2f274f0af27dcb66",
          measurementId: "G-CQTLNY509X"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
      </script>
      <script type="module">
        // ... previous Firebase init
      
        const userId = "global"; // or make dynamic per-user
        const docRef = doc(db, "progress", userId);
      
        async function saveProgress(minutes) {
          await setDoc(docRef, { completedMinutes: minutes });
        }
      
        async function loadProgress() {
          const snapshot = await getDoc(docRef);
          if (snapshot.exists()) {
            return snapshot.data().completedMinutes;
          }
          return 0;
        }
      
        // Example usage:
        let completedMinutes = await loadProgress();
        updateProgressBar(completedMinutes); // use your existing function
      </script>
</body>
</html>
